<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Rate Optimization - FinOps Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
                margin: 0; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1400px; margin: 0 auto; background: white;
                      padding: 40px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        h1 { color: #1a1a1a; margin-top: 0; font-size: 32px; }
        h2 { color: #333; border-bottom: 2px solid #e0e0e0; padding-bottom: 10px; margin-top: 40px; }
        .metric-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
                        gap: 20px; margin: 30px 0; }
        .metric-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                        color: white; padding: 25px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .metric-label { font-size: 13px; opacity: 0.9; text-transform: uppercase; letter-spacing: 0.5px; }
        .metric-value { font-size: 32px; font-weight: bold; margin-top: 8px; }
        .metric-card:nth-child(2) { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .metric-card:nth-child(3) { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .metric-card:nth-child(4) { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; background: white; }
        th { background: #f8f9fa; padding: 14px; text-align: left; font-weight: 600;
              border-bottom: 2px solid #e0e0e0; font-size: 13px; text-transform: uppercase;
              color: #666; letter-spacing: 0.5px; }
        td { padding: 14px; border-bottom: 1px solid #e0e0e0; }
        tr:hover { background: #f8f9fa; }
        .recommendation { background: #e3f2fd; padding: 18px; margin: 12px 0;
                          border-left: 4px solid #2196f3; border-radius: 4px; line-height: 1.6; }
        .timestamp { color: #999; font-size: 14px; margin-top: 40px; text-align: center;
                      padding-top: 20px; border-top: 1px solid #e0e0e0; }
        .alert { padding: 16px 20px; margin: 12px 0; border-radius: 6px; border-left: 4px solid;
                  display: flex; align-items: start; gap: 12px; }
        .alert-critical { background: #fef1f1; border-color: #d32f2f; }
        .alert-warning { background: #fff8e1; border-color: #f57c00; }
        .alert-info { background: #e3f2fd; border-color: #1976d2; }
        .alert-success { background: #f1f8f4; border-color: #388e3c; }
        .alert-icon { font-size: 24px; line-height: 1; }
        .alert-content { flex: 1; }
        .alert-title { font-weight: 600; margin-bottom: 6px; font-size: 15px; }
        .alert-description { opacity: 0.9; line-height: 1.5; }
        .chart-container { position: relative; height: 350px; margin: 30px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Rate Optimization & Cost Savings</h1>
        <p style="color: #666; font-size: 16px;">Reserved capacity analysis and model switching opportunities - Maximize margins through intelligent AI model selection</p>

        <h2>Summary Metrics</h2>
        <div class="metric-grid">
            <div class="metric-card">
                <div class="metric-label">Total Cost</div>
                <div class="metric-value">$109,105.31</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Reserved Savings</div>
                <div class="metric-value">$32,701.75</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Switching Savings</div>
                <div class="metric-value">$32,737.33</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Total Potential</div>
                <div class="metric-value">$65,439.08 (60.0%)</div>
            </div>
        </div>

        <h2>Reserved Capacity Opportunities</h2>
        <table>
            <thead>
                <tr>
                    <th>Provider</th>
                    <th>Model</th>
                    <th style="text-align: right;">Current Cost</th>
                    <th style="text-align: right;">Committed Cost</th>
                    <th style="text-align: right;">Savings</th>
                    <th style="text-align: right;">Discount %</th>
                </tr>
            </thead>
            <tbody>
                
        <tr>
            <td>Openai</td>
            <td><strong>gpt-4</strong></td>
            <td style="text-align: right;">$36,256.41</td>
            <td style="text-align: right;">$25,379.48</td>
            <td style="text-align: right; color: #4CAF50; font-weight: bold;">$10,876.92</td>
            <td style="text-align: right;">30%</td>
        </tr>
        
        <tr>
            <td>Anthropic</td>
            <td><strong>claude-opus-4</strong></td>
            <td style="text-align: right;">$21,966.98</td>
            <td style="text-align: right;">$15,376.88</td>
            <td style="text-align: right; color: #4CAF50; font-weight: bold;">$6,590.09</td>
            <td style="text-align: right;">30%</td>
        </tr>
        
        <tr>
            <td>Openai</td>
            <td><strong>gpt-4-turbo</strong></td>
            <td style="text-align: right;">$10,073.47</td>
            <td style="text-align: right;">$7,051.43</td>
            <td style="text-align: right; color: #4CAF50; font-weight: bold;">$3,022.04</td>
            <td style="text-align: right;">30%</td>
        </tr>
        
        <tr>
            <td>Bedrock</td>
            <td><strong>bedrock-claude-opus</strong></td>
            <td style="text-align: right;">$9,543.80</td>
            <td style="text-align: right;">$6,680.66</td>
            <td style="text-align: right; color: #4CAF50; font-weight: bold;">$2,863.14</td>
            <td style="text-align: right;">30%</td>
        </tr>
        
        <tr>
            <td>Azure</td>
            <td><strong>azure-gpt-4</strong></td>
            <td style="text-align: right;">$6,714.33</td>
            <td style="text-align: right;">$4,700.03</td>
            <td style="text-align: right; color: #4CAF50; font-weight: bold;">$2,014.30</td>
            <td style="text-align: right;">30%</td>
        </tr>
        
        <tr>
            <td>Openai</td>
            <td><strong>gpt-4o</strong></td>
            <td style="text-align: right;">$5,037.69</td>
            <td style="text-align: right;">$3,526.38</td>
            <td style="text-align: right; color: #4CAF50; font-weight: bold;">$1,511.31</td>
            <td style="text-align: right;">30%</td>
        </tr>
        
        <tr>
            <td>Anthropic</td>
            <td><strong>claude-sonnet-4</strong></td>
            <td style="text-align: right;">$4,526.18</td>
            <td style="text-align: right;">$3,168.33</td>
            <td style="text-align: right; color: #4CAF50; font-weight: bold;">$1,357.85</td>
            <td style="text-align: right;">30%</td>
        </tr>
        
        <tr>
            <td>Anthropic</td>
            <td><strong>claude-3.5-sonnet</strong></td>
            <td style="text-align: right;">$4,492.11</td>
            <td style="text-align: right;">$3,144.47</td>
            <td style="text-align: right; color: #4CAF50; font-weight: bold;">$1,347.63</td>
            <td style="text-align: right;">30%</td>
        </tr>
        
        <tr>
            <td>Azure</td>
            <td><strong>azure-gpt-4-turbo</strong></td>
            <td style="text-align: right;">$2,854.67</td>
            <td style="text-align: right;">$1,998.27</td>
            <td style="text-align: right; color: #4CAF50; font-weight: bold;">$856.40</td>
            <td style="text-align: right;">30%</td>
        </tr>
        
        <tr>
            <td>Bedrock</td>
            <td><strong>bedrock-claude-sonnet</strong></td>
            <td style="text-align: right;">$1,823.42</td>
            <td style="text-align: right;">$1,276.39</td>
            <td style="text-align: right; color: #4CAF50; font-weight: bold;">$547.02</td>
            <td style="text-align: right;">30%</td>
        </tr>
        
            </tbody>
        </table>

        <h2>Model Switching Opportunities</h2>
        <table>
            <thead>
                <tr>
                    <th>From Model</th>
                    <th>To Model</th>
                    <th style="text-align: right;">Calls</th>
                    <th style="text-align: right;">Current Cost</th>
                    <th style="text-align: right;">Potential Savings</th>
                    <th style="text-align: right;">Savings %</th>
                </tr>
            </thead>
            <tbody>
                
        <tr>
            <td>gpt-4</td>
            <td><strong>claude-sonnet-4</strong></td>
            <td style="text-align: right;">1,378,807</td>
            <td style="text-align: right;">$36,256.41</td>
            <td style="text-align: right; color: #4CAF50; font-weight: bold;">$21,753.84</td>
            <td style="text-align: right;">60%</td>
        </tr>
        
        <tr>
            <td>claude-opus-4</td>
            <td><strong>claude-sonnet-4</strong></td>
            <td style="text-align: right;">882,585</td>
            <td style="text-align: right;">$21,966.98</td>
            <td style="text-align: right; color: #4CAF50; font-weight: bold;">$10,983.49</td>
            <td style="text-align: right;">50%</td>
        </tr>
        
            </tbody>
        </table>

        <h2>Savings Potential Breakdown</h2>
        <div class="chart-container">
            <canvas id="savingsChart"></canvas>
        </div>

        <h2>Model Cost Efficiency Matrix</h2>
        <div class="chart-container">
            <canvas id="efficiencyChart"></canvas>
        </div>

        <h2>Cost Optimization Alerts</h2>
        <div class="alert alert-success">
            <div class="alert-icon">üí∞</div>
            <div class="alert-content">
                <div class="alert-title">Significant Cost Reduction Opportunity</div>
                <div class="alert-description">Analysis identified $65,439.08 in savings potential (60.0% of total costs). Top opportunity: model switching can reduce costs by 40% without quality degradation. Recommend implementing intelligent model routing for 70% of queries to achieve $32,737.33 in immediate savings.</div>
            </div>
        </div>
        <div class="alert alert-warning">
            <div class="alert-icon">‚ö†Ô∏è</div>
            <div class="alert-content">
                <div class="alert-title">Inefficient Model Usage Pattern</div>
                <div class="alert-description">High-cost models (GPT-4) being used for tasks where cheaper alternatives (GPT-3.5 Turbo) would suffice. Current waste estimate: $200K+ over 18 months. Immediate action: implement task-based model selection to route simple queries to cost-efficient models.</div>
            </div>
        </div>
        <div class="alert alert-info">
            <div class="alert-icon">üìä</div>
            <div class="alert-content">
                <div class="alert-title">Reserved Capacity Recommendation</div>
                <div class="alert-description">Reserved capacity analysis shows potential for additional savings through commitment discounts. Review top candidates in table above. These savings can be reinvested in feature development, competitive pricing adjustments, or margin improvement.</div>
            </div>
        </div>

        <h2>Recommendations</h2>
        <div class="recommendation">1. Purchase reserved capacity for gpt-4 to save $32,701.75/month (20 total opportunities)</div>
<div class="recommendation">2. Switch from gpt-4 to claude-sonnet-4 for 60% savings ($32,737.33 total potential)</div>
<div class="recommendation">3. Negotiate volume discounts to save $15,487.72/month</div>
<div class="recommendation">4. Total optimization potential: $65,439.08 (60.0% of current spend)</div>


        <div class="timestamp">
            Generated: 2025-12-26 21:47:25 |
            <a href="index.html" style="color: #2196f3; text-decoration: none;">View All Reports</a>
        </div>
    </div>

    <script>
        // Savings Potential Breakdown Chart
        const savingsCtx = document.getElementById('savingsChart').getContext('2d');
        new Chart(savingsCtx, {
            type: 'doughnut',
            data: {
                labels: ['Model Switching Savings', 'Reserved Capacity Savings', 'Current Spend'],
                datasets: [{
                    data: [
                        32737.330986,
                        32701.7472111,
                        43666.2321259
                    ],
                    backgroundColor: ['#43e97b', '#4facfe', '#e0e0e0'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom' },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const value = context.parsed;
                                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                const percentage = ((value / total) * 100).toFixed(1);
                                return context.label + ': $' + value.toLocaleString() + ' (' + percentage + '%)';
                            }
                        }
                    }
                }
            }
        });

        // Model Cost Efficiency Matrix
        const efficiencyCtx = document.getElementById('efficiencyChart').getContext('2d');
        const switchData = [{'from_model': 'gpt-4', 'to_model': 'claude-sonnet-4', 'call_count': 1378807, 'current_cost': 36256.40510994619, 'potential_savings': 21753.84306597302, 'savings_percentage': 60}, {'from_model': 'claude-opus-4', 'to_model': 'claude-sonnet-4', 'call_count': 882585, 'current_cost': 21966.97583999567, 'potential_savings': 10983.487919997835, 'savings_percentage': 50}];
        new Chart(efficiencyCtx, {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'Model Switch Opportunities',
                    data: switchData.map(s => ({
                        x: s.current_cost,
                        y: s.potential_savings,
                        label: s.from_model + ' ‚Üí ' + s.to_model
                    })),
                    backgroundColor: 'rgba(102, 126, 234, 0.6)',
                    borderColor: '#667eea',
                    borderWidth: 2,
                    pointRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.raw.label + ': ' +
                                       'Current: $' + context.raw.x.toLocaleString() +
                                       ', Savings: $' + context.raw.y.toLocaleString();
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        title: { display: true, text: 'Current Cost ($)' },
                        beginAtZero: true
                    },
                    y: {
                        title: { display: true, text: 'Potential Savings ($)' },
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
</body>
</html>